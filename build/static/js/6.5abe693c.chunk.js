(this["webpackJsonproger-web-tht"]=this["webpackJsonproger-web-tht"]||[]).push([[6],{1249:function(e,t,n){"use strict";n.r(t),n.d(t,"ExpenseListRoute",(function(){return G}));var r=n(52),c=n(63),a=n(48),i=n(46),s=n(1247),o=n(61),u=n(7),l=n(0),f=n.n(l),p=n(64),d=n(47),b=n(62),j=n(2),h=n(1),m=u.c.h5.withConfig({displayName:"ExpensesSection__Title",componentId:"sc-1affuem-0"})(["font-size:16px;font-weight:bold;"]),x=u.c.div.withConfig({displayName:"ExpensesSection__SectionItem",componentId:"sc-1affuem-1"})(["display:flex;border:1px solid #f1f1f1;border-radius:4px;background-color:white;padding:10px 15px;margin-bottom:10px;font-size:12px;"]),O=u.c.div.withConfig({displayName:"ExpensesSection__FileNameContainer",componentId:"sc-1affuem-2"})(["flex:1;display:flex;flex-direction:column;justify-content:center;"]),v=u.c.div.withConfig({displayName:"ExpensesSection__FileNameInfo",componentId:"sc-1affuem-3"})(["color:#8f959b;"]),g=u.c.div.withConfig({displayName:"ExpensesSection__VendorNameInfo",componentId:"sc-1affuem-4"})(["font-weight:bold;"]),y=u.c.div.withConfig({displayName:"ExpensesSection__AmountContainer",componentId:"sc-1affuem-5"})(["flex:0 0 200px;display:flex;flex-direction:column;justify-content:center;"]),w=u.c.div.withConfig({displayName:"ExpensesSection__AmountInfo",componentId:"sc-1affuem-6"})(["color:#7cb87b;"]),E=u.c.div.withConfig({displayName:"ExpensesSection__DateInfo",componentId:"sc-1affuem-7"})(["color:#8f959b;"]),k=u.c.div.withConfig({displayName:"ExpensesSection__ButtonContainer",componentId:"sc-1affuem-8"})(["display:flex;flex-direction:column;justify-content:center;"]),S=function(e){var t=e.title,n=e.items,r=e.showLoading,c=e.hideViewExpenseButton,a=Object(j.g)(),i=Object(l.useCallback)((function(e){a.push("/expenses/".concat(e))}),[a]);return n?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(m,{children:t}),n.map((function(e){return e.id?Object(h.jsxs)(x,{children:[Object(h.jsxs)(O,{children:[Object(h.jsx)(g,{children:e.vendorName}),Object(h.jsx)(v,{children:e.filename})]}),Object(h.jsx)(y,{children:r?Object(h.jsx)(b.a,{text:t}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(w,{children:["$",e.amount]}),Object(h.jsx)(E,{children:e.createdAt&&new Date(e.createdAt).toLocaleString()})]})}),Object(h.jsx)(k,{children:!c&&Object(h.jsx)(d.a,{onClick:function(){return e.id&&i(e.id)},children:"View expense"})})]},e.id):null}))]}):null},N=Object(l.memo)(S),I=n(49),C=n(1150),_=n.n(C),A=n(1233),z=n.n(A),P=n(1237),D=n.n(P),L=n(80),M=n(81),B=function(e){var t=Object(l.useRef)(e),n=f.a.useState(),r=Object(o.a)(n,2)[1],c=f.a.useCallback((function(e){t.current=e,r({})}),[]);return[Object(l.useCallback)((function(){return t}),[t.current]),c]},U=u.c.input.withConfig({displayName:"ExpenseListRoute__UploadInput",componentId:"sc-18y3qim-0"})(["display:none;"]),G=function(){var e=Object(L.a)(),t=Object(l.useState)(!1),n=Object(o.a)(t,2),u=n[0],f=n[1],j=Object(l.useState)(),m=Object(o.a)(j,2),x=m[0],O=m[1],v=Object(l.useRef)(null),g=B([]),y=Object(o.a)(g,2),w=y[0],E=y[1],k=B({}),S=Object(o.a)(k,2),C=S[0],A=S[1],P=Object(l.useCallback)((function(e){var t=w().current.findIndex((function(t){return t.id===e.id}));if(-1!==t){var n=Object(s.a)(w().current);n.splice(t,1,e),E(n)}}),[w,E]);Object(l.useEffect)((function(){var t=function(){var t=Object(i.a)(Object(a.a)().mark((function t(){var n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(void 0),f(!0),t.prev=2,t.next=5,I.b.listExpenses();case 5:n=t.sent,E(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),O(t.t0);case 12:return t.prev=12,e&&f(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})));return function(){return t.apply(this,arguments)}}();t()}),[e,f,O,E]),Object(l.useEffect)((function(){return I.b.on("expenseAnalyzed",P),function(){I.b.off("expenseAnalyzed",P)}}),[P]);var G=Object(l.useCallback)((function(){v.current&&v.current.click()}),[]),R=Object(l.useCallback)(function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var n,i,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files){e.next=2;break}return e.abrupt("return");case 2:return n=t.target.files[0],i=D()(),A(Object(c.a)(Object(c.a)({},C().current),{},Object(r.a)({},i,n))),O(void 0),e.prev=6,e.next=9,I.b.uploadExpense(n);case 9:o=e.sent,E([].concat(Object(s.a)(w().current),[o])),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),O(e.t0);case 16:return e.prev=16,A(Object(c.a)(Object(c.a)({},C().current),{},Object(r.a)({},i,void 0))),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[6,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),[w,C,A,E,O]),F=Object(l.useMemo)((function(){return _()(w().current,(function(e){return e.status}))}),[w]),T=Object(l.useMemo)((function(){return z()(C().current,(function(e,t,n){return t?(e.push({id:n,filename:t.name}),e):e}),[])}),[C]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(p.a,{title:"Expenses",children:[Object(h.jsx)(U,{ref:v,onChange:R,type:"file",id:"file"}),Object(h.jsx)(d.a,{onClick:G,children:"Upload expenses"})]}),x&&Object(h.jsx)(M.a,{text:x.message}),u?Object(h.jsx)(b.a,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{title:"Uploading",showLoading:!0,hideViewExpenseButton:!0,items:T.length?T:void 0}),Object(h.jsx)(N,{title:"Analyzing",showLoading:!0,items:F.ANALYZING}),Object(h.jsx)(N,{title:"Unpaid",items:F.UNPAID}),Object(h.jsx)(N,{title:"Paid",items:F.PAID})]})]})};t.default=G},47:function(e,t,n){"use strict";var r,c,a=n(9),i=n(7),s=n(0),o=n(1),u=function(e){var t=e.className,n=e.onClick,r=e.color,c=e.backgroundColor,a=e.children,i=e.variant,s=void 0===i?"primary":i;return Object(o.jsx)(l,{className:t,color:r,backgroundColor:c,onClick:n,variant:s,children:a})},l=i.c.button.withConfig({displayName:"Button__ButtonStyled",componentId:"sc-4p76xp-0"})(["display:flex;align-items:center;justify-content:center;border-radius:4px;border:none;cursor:pointer;padding:5px 10px;user-select:none;color:",";background-color:",";"," ",""],(function(e){return e.color||"white"}),(function(e){return e.backgroundColor||"#371e88"}),(function(e){return"primary"===e.variant&&Object(i.b)(r||(r=Object(a.a)(["\n      background-color: #0071b1;\n      &:hover,\n      &:focus {\n        filter: brightness(112%);\n      }\n      &:active {\n        filter: brightness(124%);\n      }\n    "])))}),(function(e){return"danger"===e.variant&&Object(i.b)(c||(c=Object(a.a)(["\n      background-color: #d73814;\n      &:hover,\n      &:focus {\n        filter: brightness(112%);\n      }\n      &:active {\n        filter: brightness(124%);\n      }\n    "])))}));t.a=Object(s.memo)(u)},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return d}));var r,c=n(48),a=n(46),i=n(65),s=n(66),o=n(53),u=n.n(o),l=n(67),f=n.n(l);!function(e){e.ANALYZING="ANALYZING",e.UNPAID="UNPAID",e.PAID="PAID"}(r||(r={}));var p=function(){function e(){Object(i.a)(this,e),this.listeners=new Map}return Object(s.a)(e,[{key:"getExpense",value:function(){var e=Object(a.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:if((n=this.getExpensesStorage())[t]){e.next=5;break}throw new Error("Expense '".concat(t,"' not found"));case 5:return e.abrupt("return",n[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listExpenses",value:function(){var e=Object(a.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return t=this.getExpensesStorage(),e.abrupt("return",Object.values(t).sort((function(e,t){return t.createdAt.localeCompare(t.createdAt)})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadExpense",value:function(){var e=Object(a.a)(Object(c.a)().mark((function e(t){var n,a=this;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(2e3,4e3);case 2:return n={id:u()(),createdAt:(new Date).toISOString(),filename:t.name,status:r.ANALYZING,vendorName:null,amount:null},this.updateExpensesStorage((function(e){return e[n.id]=n,e})),setTimeout((function(){a.updateExpensesStorage((function(e){var t=e[n.id];return t&&(t.status=r.UNPAID,t.vendorName=f.a.company.companyName(),t.amount=f.a.commerce.price()),e}));var e=a.getExpensesStorage();a.emit("expenseAnalyzed",e[n.id])}),b(3e3,8e3)),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patchExpense",value:function(){var e=Object(a.a)(Object(c.a)().mark((function e(t,n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return this.updateExpensesStorage((function(e){if(!e[t])throw new Error("Expense '".concat(t,"' not found"));return Object.assign(e[t],n),e})),e.abrupt("return",this.getExpensesStorage()[t]);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteExpense",value:function(){var e=Object(a.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:this.updateExpensesStorage((function(e){return delete e[t],e}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reset",value:function(){var e=Object(a.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateExpensesStorage((function(){return{}}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){var n=this.listeners.get(e);n||(n=new Set,this.listeners.set(e,n)),n.add(t)}},{key:"off",value:function(e,t){var n=this.listeners.get(e);n&&n.delete(t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var c=this.listeners.get(e);c&&c.forEach((function(e){return e.apply(void 0,n)}))}},{key:"getExpensesStorage",value:function(){var e=localStorage.getItem("roger-tht-expenses");return e?JSON.parse(e):{}}},{key:"updateExpensesStorage",value:function(e){var t=e(this.getExpensesStorage());localStorage.setItem("roger-tht-expenses",JSON.stringify(t))}}]),e}(),d=new p;function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return Math.round(e+Math.random()*t)}function j(){return h.apply(this,arguments)}function h(){return h=Object(a.a)(Object(c.a)().mark((function e(){var t,n,r=arguments;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:200,n=r.length>1&&void 0!==r[1]?r[1]:500,e.next=4,new Promise((function(e){return window.setTimeout(e,b(t,n))}));case 4:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}},62:function(e,t,n){"use strict";var r,c,a,i=n(7),s=n(0),o=["title","titleId"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function f(e,t){var n=e.title,i=e.titleId,f=l(e,o);return s.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:200,height:200,className:"uil-ring",preserveAspectRatio:"xMidYMid",viewBox:"0 0 100 100",ref:t,"aria-labelledby":i},f),n?s.createElement("title",{id:i},n):null,r||(r=s.createElement("path",{fill:"none",d:"M0 0h100v100H0z",className:"bk"})),c||(c=s.createElement("defs",null,s.createElement("filter",{id:"a",width:"300%",height:"300%",x:"-100%",y:"-100%"},s.createElement("feOffset",{in:"SourceGraphic",result:"offOut"}),s.createElement("feGaussianBlur",{in:"offOut",result:"blurOut"}),s.createElement("feBlend",{in:"SourceGraphic",in2:"blurOut"})))),a||(a=s.createElement("path",{fill:"#009DE0",d:"M10 50s0 .5.1 1.4c0 .5.1 1 .2 1.7 0 .3.1.7.1 1.1.1.4.1.8.2 1.2.2.8.3 1.8.5 2.8.3 1 .6 2.1.9 3.2.3 1.1.9 2.3 1.4 3.5.5 1.2 1.2 2.4 1.8 3.7.3.6.8 1.2 1.2 1.9.4.6.8 1.3 1.3 1.9 1 1.2 1.9 2.6 3.1 3.7 2.2 2.5 5 4.7 7.9 6.7 3 2 6.5 3.4 10.1 4.6 3.6 1.1 7.5 1.5 11.2 1.6 4-.1 7.7-.6 11.3-1.6 3.6-1.2 7-2.6 10-4.6 3-2 5.8-4.2 7.9-6.7 1.2-1.2 2.1-2.5 3.1-3.7.5-.6.9-1.3 1.3-1.9.4-.6.8-1.3 1.2-1.9.6-1.3 1.3-2.5 1.8-3.7.5-1.2 1-2.4 1.4-3.5.3-1.1.6-2.2.9-3.2.2-1 .4-1.9.5-2.8.1-.4.1-.8.2-1.2 0-.4.1-.7.1-1.1.1-.7.1-1.2.2-1.7.1-.9.1-1.4.1-1.4V54.2c0 .4-.1.8-.1 1.2-.1.9-.2 1.8-.4 2.8-.2 1-.5 2.1-.7 3.3-.3 1.2-.8 2.4-1.2 3.7-.2.7-.5 1.3-.8 1.9-.3.7-.6 1.3-.9 2-.3.7-.7 1.3-1.1 2-.4.7-.7 1.4-1.2 2-1 1.3-1.9 2.7-3.1 4-2.2 2.7-5 5-8.1 7.1L70 85.7c-.8.5-1.7.9-2.6 1.3l-1.4.7-1.4.5c-.9.3-1.8.7-2.8 1C58 90.3 53.9 90.9 50 91l-3-.2c-1 0-2-.2-3-.3l-1.5-.2-.7-.1-.7-.2c-1-.3-1.9-.5-2.9-.7-.9-.3-1.9-.7-2.8-1l-1.4-.6-1.3-.6c-.9-.4-1.8-.8-2.6-1.3l-2.4-1.5c-3.1-2.1-5.9-4.5-8.1-7.1-1.2-1.2-2.1-2.7-3.1-4-.5-.6-.8-1.4-1.2-2-.4-.7-.8-1.3-1.1-2-.3-.7-.6-1.3-.9-2-.3-.7-.6-1.3-.8-1.9-.4-1.3-.9-2.5-1.2-3.7-.3-1.2-.5-2.3-.7-3.3-.2-1-.3-2-.4-2.8-.1-.4-.1-.8-.1-1.2v-2.8c-.1-1-.1-1.5-.1-1.5z",filter:"url(#a)"},s.createElement("animateTransform",{attributeName:"transform",dur:"1s",from:"0 50 50",repeatCount:"indefinite",to:"360 50 50",type:"rotate"}))))}var p=s.forwardRef(f),d=(n.p,n(1)),b=i.c.div.withConfig({displayName:"Spinner__SpinnerContainer",componentId:"sc-avs4so-0"})(["display:flex;align-items:center;"]),j=i.c.span.withConfig({displayName:"Spinner__SpinnerText",componentId:"sc-avs4so-1"})(["margin-left:10px;"]),h=Object(i.c)(p).withConfig({displayName:"Spinner__StyledSpinnerIcon",componentId:"sc-avs4so-2"})(["height:",";margin-right:8px;width:",";"],(function(e){return"sm"===e.$size?"1rem":"2rem"}),(function(e){return"sm"===e.$size?"1rem":"2rem"}));t.a=function(e){var t=e.text,n=e.size,r=void 0===n?"md":n;return Object(d.jsxs)(b,{children:[Object(d.jsx)(h,{$size:r}),t&&Object(d.jsx)(j,{children:t})]})}},64:function(e,t,n){"use strict";var r=n(7),c=(n(0),n(1)),a=r.c.div.withConfig({displayName:"SectionHeader__Container",componentId:"sc-pl37pr-0"})(["display:flex;justify-content:space-between;margin-bottom:20px;"]);t.a=function(e){var t=e.title,n=e.children;return Object(c.jsxs)(a,{children:[Object(c.jsx)("h2",{children:t}),n]})}},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),c=function(){var e=Object(r.useRef)(!1);return Object(r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),Object(r.useCallback)((function(){return e.current}),[])}},81:function(e,t,n){"use strict";var r=n(0),c=n(1),a=function(e){var t=e.text;return Object(c.jsx)("div",{className:"alert alert-danger",role:"alert",children:t})};t.a=Object(r.memo)(a)}}]);
//# sourceMappingURL=6.5abe693c.chunk.js.map