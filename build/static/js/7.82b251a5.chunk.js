(this["webpackJsonproger-web-tht"]=this["webpackJsonproger-web-tht"]||[]).push([[7],{1248:function(e,t,n){"use strict";n.r(t),n.d(t,"SettingsRoute",(function(){return p}));var r=n(48),a=n(46),c=n(61),s=n(0),o=n(47),u=n(49),i=n(1),p=function(){var e=Object(s.useState)(!1),t=Object(c.a)(e,2),n=t[0],p=t[1],l=Object(s.useState)(""),f=Object(c.a)(l,2),d=f[0],h=f[1],b=function(){var e=Object(a.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,u.b.reset();case 3:p(!1),h("All expenses were deleted.");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:"Data reset"}),Object(i.jsx)("p",{children:"Clicking this button will delete all expenses from localStorage."}),d&&Object(i.jsx)("div",{className:"alert alert-info",children:d}),Object(i.jsx)("p",{children:Object(i.jsx)(o.a,{variant:"danger",onClick:b,disabled:n,children:"Delete all expenses"})})]})};t.default=p},47:function(e,t,n){"use strict";var r,a,c=n(9),s=n(7),o=n(0),u=n(1),i=function(e){var t=e.className,n=e.onClick,r=e.color,a=e.backgroundColor,c=e.children,s=e.variant,o=void 0===s?"primary":s;return Object(u.jsx)(p,{className:t,color:r,backgroundColor:a,onClick:n,variant:o,children:c})},p=s.c.button.withConfig({displayName:"Button__ButtonStyled",componentId:"sc-4p76xp-0"})(["display:flex;align-items:center;justify-content:center;border-radius:4px;border:none;cursor:pointer;padding:5px 10px;user-select:none;color:",";background-color:",";"," ",""],(function(e){return e.color||"white"}),(function(e){return e.backgroundColor||"#371e88"}),(function(e){return"primary"===e.variant&&Object(s.b)(r||(r=Object(c.a)(["\n      background-color: #0071b1;\n      &:hover,\n      &:focus {\n        filter: brightness(112%);\n      }\n      &:active {\n        filter: brightness(124%);\n      }\n    "])))}),(function(e){return"danger"===e.variant&&Object(s.b)(a||(a=Object(c.a)(["\n      background-color: #d73814;\n      &:hover,\n      &:focus {\n        filter: brightness(112%);\n      }\n      &:active {\n        filter: brightness(124%);\n      }\n    "])))}));t.a=Object(o.memo)(i)},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return d}));var r,a=n(48),c=n(46),s=n(65),o=n(66),u=n(53),i=n.n(u),p=n(67),l=n.n(p);!function(e){e.ANALYZING="ANALYZING",e.UNPAID="UNPAID",e.PAID="PAID"}(r||(r={}));var f=function(){function e(){Object(s.a)(this,e),this.listeners=new Map}return Object(o.a)(e,[{key:"getExpense",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:if((n=this.getExpensesStorage())[t]){e.next=5;break}throw new Error("Expense '".concat(t,"' not found"));case 5:return e.abrupt("return",n[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listExpenses",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return t=this.getExpensesStorage(),e.abrupt("return",Object.values(t).sort((function(e,t){return t.createdAt.localeCompare(t.createdAt)})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadExpense",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,c=this;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(2e3,4e3);case 2:return n={id:i()(),createdAt:(new Date).toISOString(),filename:t.name,status:r.ANALYZING,vendorName:null,amount:null},this.updateExpensesStorage((function(e){return e[n.id]=n,e})),setTimeout((function(){c.updateExpensesStorage((function(e){var t=e[n.id];return t&&(t.status=r.UNPAID,t.vendorName=l.a.company.companyName(),t.amount=l.a.commerce.price()),e}));var e=c.getExpensesStorage();c.emit("expenseAnalyzed",e[n.id])}),h(3e3,8e3)),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patchExpense",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return this.updateExpensesStorage((function(e){if(!e[t])throw new Error("Expense '".concat(t,"' not found"));return Object.assign(e[t],n),e})),e.abrupt("return",this.getExpensesStorage()[t]);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteExpense",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:this.updateExpensesStorage((function(e){return delete e[t],e}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reset",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateExpensesStorage((function(){return{}}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){var n=this.listeners.get(e);n||(n=new Set,this.listeners.set(e,n)),n.add(t)}},{key:"off",value:function(e,t){var n=this.listeners.get(e);n&&n.delete(t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=this.listeners.get(e);a&&a.forEach((function(e){return e.apply(void 0,n)}))}},{key:"getExpensesStorage",value:function(){var e=localStorage.getItem("roger-tht-expenses");return e?JSON.parse(e):{}}},{key:"updateExpensesStorage",value:function(e){var t=e(this.getExpensesStorage());localStorage.setItem("roger-tht-expenses",JSON.stringify(t))}}]),e}(),d=new f;function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return Math.round(e+Math.random()*t)}function b(){return v.apply(this,arguments)}function v(){return v=Object(c.a)(Object(a.a)().mark((function e(){var t,n,r=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:200,n=r.length>1&&void 0!==r[1]?r[1]:500,e.next=4,new Promise((function(e){return window.setTimeout(e,h(t,n))}));case 4:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}}}]);
//# sourceMappingURL=7.82b251a5.chunk.js.map