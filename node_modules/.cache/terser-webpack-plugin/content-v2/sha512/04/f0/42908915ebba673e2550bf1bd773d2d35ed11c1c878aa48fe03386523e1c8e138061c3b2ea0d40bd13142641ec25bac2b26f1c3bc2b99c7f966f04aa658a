{"code":"(this[\"webpackJsonproger-web-tht\"]=this[\"webpackJsonproger-web-tht\"]||[]).push([[7],{1248:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"SettingsRoute\",(function(){return p}));var r=n(48),a=n(46),c=n(61),s=n(0),o=n(47),u=n(49),i=n(1),p=function(){var e=Object(s.useState)(!1),t=Object(c.a)(e,2),n=t[0],p=t[1],l=Object(s.useState)(\"\"),f=Object(c.a)(l,2),d=f[0],h=f[1],b=function(){var e=Object(a.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,u.b.reset();case 3:p(!1),h(\"All expenses were deleted.\");case 5:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(\"h1\",{children:\"Data reset\"}),Object(i.jsx)(\"p\",{children:\"Clicking this button will delete all expenses from localStorage.\"}),d&&Object(i.jsx)(\"div\",{className:\"alert alert-info\",children:d}),Object(i.jsx)(\"p\",{children:Object(i.jsx)(o.a,{variant:\"danger\",onClick:b,disabled:n,children:\"Delete all expenses\"})})]})};t.default=p},47:function(e,t,n){\"use strict\";var r,a,c=n(9),s=n(7),o=n(0),u=n(1),i=function(e){var t=e.className,n=e.onClick,r=e.color,a=e.backgroundColor,c=e.children,s=e.variant,o=void 0===s?\"primary\":s;return Object(u.jsx)(p,{className:t,color:r,backgroundColor:a,onClick:n,variant:o,children:c})},p=s.c.button.withConfig({displayName:\"Button__ButtonStyled\",componentId:\"sc-4p76xp-0\"})([\"display:flex;align-items:center;justify-content:center;border-radius:4px;border:none;cursor:pointer;padding:5px 10px;user-select:none;color:\",\";background-color:\",\";\",\" \",\"\"],(function(e){return e.color||\"white\"}),(function(e){return e.backgroundColor||\"#371e88\"}),(function(e){return\"primary\"===e.variant&&Object(s.b)(r||(r=Object(c.a)([\"\\n      background-color: #0071b1;\\n      &:hover,\\n      &:focus {\\n        filter: brightness(112%);\\n      }\\n      &:active {\\n        filter: brightness(124%);\\n      }\\n    \"])))}),(function(e){return\"danger\"===e.variant&&Object(s.b)(a||(a=Object(c.a)([\"\\n      background-color: #d73814;\\n      &:hover,\\n      &:focus {\\n        filter: brightness(112%);\\n      }\\n      &:active {\\n        filter: brightness(124%);\\n      }\\n    \"])))}));t.a=Object(o.memo)(i)},49:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return r})),n.d(t,\"b\",(function(){return d}));var r,a=n(48),c=n(46),s=n(65),o=n(66),u=n(53),i=n.n(u),p=n(67),l=n.n(p);!function(e){e.ANALYZING=\"ANALYZING\",e.UNPAID=\"UNPAID\",e.PAID=\"PAID\"}(r||(r={}));var f=function(){function e(){Object(s.a)(this,e),this.listeners=new Map}return Object(o.a)(e,[{key:\"getExpense\",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:if((n=this.getExpensesStorage())[t]){e.next=5;break}throw new Error(\"Expense '\".concat(t,\"' not found\"));case 5:return e.abrupt(\"return\",n[t]);case 6:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"listExpenses\",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return t=this.getExpensesStorage(),e.abrupt(\"return\",Object.values(t).sort((function(e,t){return t.createdAt.localeCompare(t.createdAt)})));case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"uploadExpense\",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,c=this;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(2e3,4e3);case 2:return n={id:i()(),createdAt:(new Date).toISOString(),filename:t.name,status:r.ANALYZING,vendorName:null,amount:null},this.updateExpensesStorage((function(e){return e[n.id]=n,e})),setTimeout((function(){c.updateExpensesStorage((function(e){var t=e[n.id];return t&&(t.status=r.UNPAID,t.vendorName=l.a.company.companyName(),t.amount=l.a.commerce.price()),e}));var e=c.getExpensesStorage();c.emit(\"expenseAnalyzed\",e[n.id])}),h(3e3,8e3)),e.abrupt(\"return\",n);case 6:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"patchExpense\",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return this.updateExpensesStorage((function(e){if(!e[t])throw new Error(\"Expense '\".concat(t,\"' not found\"));return Object.assign(e[t],n),e})),e.abrupt(\"return\",this.getExpensesStorage()[t]);case 4:case\"end\":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:\"deleteExpense\",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:this.updateExpensesStorage((function(e){return delete e[t],e}));case 3:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"reset\",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateExpensesStorage((function(){return{}}));case 1:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"on\",value:function(e,t){var n=this.listeners.get(e);n||(n=new Set,this.listeners.set(e,n)),n.add(t)}},{key:\"off\",value:function(e,t){var n=this.listeners.get(e);n&&n.delete(t)}},{key:\"emit\",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=this.listeners.get(e);a&&a.forEach((function(e){return e.apply(void 0,n)}))}},{key:\"getExpensesStorage\",value:function(){var e=localStorage.getItem(\"roger-tht-expenses\");return e?JSON.parse(e):{}}},{key:\"updateExpensesStorage\",value:function(e){var t=e(this.getExpensesStorage());localStorage.setItem(\"roger-tht-expenses\",JSON.stringify(t))}}]),e}(),d=new f;function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return Math.round(e+Math.random()*t)}function b(){return v.apply(this,arguments)}function v(){return v=Object(c.a)(Object(a.a)().mark((function e(){var t,n,r=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:200,n=r.length>1&&void 0!==r[1]?r[1]:500,e.next=4,new Promise((function(e){return window.setTimeout(e,h(t,n))}));case 4:case\"end\":return e.stop()}}),e)}))),v.apply(this,arguments)}}}]);","name":"static/js/7.82b251a5.chunk.js","map":{"version":3,"names":["this","push","module","__webpack_exports__","__webpack_require__","r","d","SettingsRoute","_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__","_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__","_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_3__","_components_Button__WEBPACK_IMPORTED_MODULE_4__","_util_roger_api_client__WEBPACK_IMPORTED_MODULE_5__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__","_useState","Object","_useState2","working","setWorking","_useState3","_useState4","message","setMessage","reset","_ref","mark","_callee","wrap","_context","prev","next","stop","apply","arguments","children","className","variant","onClick","disabled","_templateObject","_templateObject2","_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0__","styled_components__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__","Button","color","backgroundColor","_ref$variant","ButtonStyled","button","withConfig","displayName","componentId","_ref2","_ref3","_ref4","_ref5","ExpenseStatus","client","_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__","_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__","uuid_v4__WEBPACK_IMPORTED_MODULE_4__","uuid_v4__WEBPACK_IMPORTED_MODULE_4___default","n","faker__WEBPACK_IMPORTED_MODULE_5__","faker__WEBPACK_IMPORTED_MODULE_5___default","RogerApiClient","listeners","Map","key","value","_getExpense","expenseId","storage","randomWait","getExpensesStorage","Error","concat","abrupt","_x","_listExpenses","_callee2","_context2","values","sort","a","b","createdAt","localeCompare","_uploadExpense","_callee3","file","expense","_this","_context3","id","Date","toISOString","filename","name","status","ANALYZING","vendorName","amount","updateExpensesStorage","setTimeout","UNPAID","company","companyName","commerce","price","emit","randomLatency","_x2","_patchExpense","_callee4","changes","_context4","assign","_x3","_x4","_deleteExpense","_callee5","_context5","_x5","_reset","_callee6","_context6","eventName","listener","eventListeners","get","Set","set","add","delete","_len","length","args","Array","_key","forEach","raw","localStorage","getItem","JSON","parse","callback","setItem","stringify","min","undefined","max","Math","round","random","_randomWait","_callee7","_args7","_context7","Promise","resolve","window"],"sources":["static/js/7.82b251a5.chunk.js"],"mappings":"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"},"input":"(this[\"webpackJsonproger-web-tht\"] = this[\"webpackJsonproger-web-tht\"] || []).push([[7],{\n\n/***/ 1248:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SettingsRoute\", function() { return SettingsRoute; });\n/* harmony import */ var _Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48);\n/* harmony import */ var _Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n/* harmony import */ var _Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(61);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(47);\n/* harmony import */ var _util_roger_api_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(49);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__);\nvar SettingsRoute=function SettingsRoute(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(false),_useState2=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(_useState,2),working=_useState2[0],setWorking=_useState2[1];var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(''),_useState4=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var reset=/*#__PURE__*/function(){var _ref=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(/*#__PURE__*/Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee(){return Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setWorking(true);_context.next=3;return _util_roger_api_client__WEBPACK_IMPORTED_MODULE_5__[/* client */ \"b\"].reset();case 3:setWorking(false);setMessage('All expenses were deleted.');case 5:case\"end\":return _context.stop();}}},_callee);}));return function reset(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__[\"jsxs\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__[\"Fragment\"],{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__[\"jsx\"])(\"h1\",{children:\"Data reset\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__[\"jsx\"])(\"p\",{children:\"Clicking this button will delete all expenses from localStorage.\"}),message&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__[\"jsx\"])(\"div\",{className:\"alert alert-info\",children:message}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__[\"jsx\"])(_components_Button__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"],{variant:\"danger\",onClick:reset,disabled:working,children:\"Delete all expenses\"})})]});};/* harmony default export */ __webpack_exports__[\"default\"] = (SettingsRoute);\n\n/***/ }),\n\n/***/ 47:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);\nvar _templateObject,_templateObject2;var Button=function Button(_ref){var className=_ref.className,onClick=_ref.onClick,color=_ref.color,backgroundColor=_ref.backgroundColor,children=_ref.children,_ref$variant=_ref.variant,variant=_ref$variant===void 0?'primary':_ref$variant;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(ButtonStyled,{className:className,color:color,backgroundColor:backgroundColor,onClick:onClick,variant:variant,children:children});};var ButtonStyled=styled_components__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"c\"].button.withConfig({displayName:\"Button__ButtonStyled\",componentId:\"sc-4p76xp-0\"})([\"display:flex;align-items:center;justify-content:center;border-radius:4px;border:none;cursor:pointer;padding:5px 10px;user-select:none;color:\",\";background-color:\",\";\",\" \",\"\"],function(_ref2){var color=_ref2.color;return color||'white';},function(_ref3){var backgroundColor=_ref3.backgroundColor;return backgroundColor||'#371e88';},function(_ref4){var variant=_ref4.variant;return variant==='primary'&&Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* css */ \"b\"])(_templateObject||(_templateObject=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])([\"\\n      background-color: #0071b1;\\n      &:hover,\\n      &:focus {\\n        filter: brightness(112%);\\n      }\\n      &:active {\\n        filter: brightness(124%);\\n      }\\n    \"])));},function(_ref5){var variant=_ref5.variant;return variant==='danger'&&Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* css */ \"b\"])(_templateObject2||(_templateObject2=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])([\"\\n      background-color: #d73814;\\n      &:hover,\\n      &:focus {\\n        filter: brightness(112%);\\n      }\\n      &:active {\\n        filter: brightness(124%);\\n      }\\n    \"])));});/* harmony default export */ __webpack_exports__[\"a\"] = (/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_2__[\"memo\"])(Button));\n\n/***/ }),\n\n/***/ 49:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ExpenseStatus; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return client; });\n/* harmony import */ var _Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48);\n/* harmony import */ var _Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n/* harmony import */ var _Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(65);\n/* harmony import */ var _Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(66);\n/* harmony import */ var uuid_v4__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(53);\n/* harmony import */ var uuid_v4__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(uuid_v4__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var faker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(67);\n/* harmony import */ var faker__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(faker__WEBPACK_IMPORTED_MODULE_5__);\n/**\n * Shape of a expense.\n */ /**\n * Newly uploaded expenses start out as being analyzed. After a period of time,\n * they become unpaid. When a user marks them as such, they become paid.\n */var ExpenseStatus;/**\n * Fake implementation of a primitive API that handles expenses.\n */(function(ExpenseStatus){ExpenseStatus[\"ANALYZING\"]=\"ANALYZING\";ExpenseStatus[\"UNPAID\"]=\"UNPAID\";ExpenseStatus[\"PAID\"]=\"PAID\";})(ExpenseStatus||(ExpenseStatus={}));var RogerApiClient=/*#__PURE__*/function(){function RogerApiClient(){Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(this,RogerApiClient);this.listeners=new Map();}Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(RogerApiClient,[{key:\"getExpense\",value:/**\n   * Finds a single expense by its ID and resolves with it. Will reject if the expense\n   * does not exist.\n   */function(){var _getExpense=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(/*#__PURE__*/Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee(expenseId){var storage;return Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return randomWait();case 2:storage=this.getExpensesStorage();if(storage[expenseId]){_context.next=5;break;}throw new Error(\"Expense '\".concat(expenseId,\"' not found\"));case 5:return _context.abrupt(\"return\",storage[expenseId]);case 6:case\"end\":return _context.stop();}}},_callee,this);}));function getExpense(_x){return _getExpense.apply(this,arguments);}return getExpense;}()/**\n   * Resolves with a list of all expenses sorted by `createdAt` in descending\n   * order.\n   */},{key:\"listExpenses\",value:function(){var _listExpenses=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(/*#__PURE__*/Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee2(){var storage;return Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return randomWait();case 2:storage=this.getExpensesStorage();return _context2.abrupt(\"return\",Object.values(storage).sort(function(a,b){return b.createdAt.localeCompare(b.createdAt);}));case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function listExpenses(){return _listExpenses.apply(this,arguments);}return listExpenses;}()/**\n   * Takes a `File` object, which the user has selected for upload. Uploads the\n   * file (which takes a few seconds), and then resolves with a new `Expense`\n   * object with status=ANALYZING.\n   *\n   * After a random period of time, the expense will be analyzed and be marked as\n   * paid. Listen for `expenseAnalyzed` events through the `on` method.\n   */},{key:\"uploadExpense\",value:function(){var _uploadExpense=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(/*#__PURE__*/Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee3(file){var _this=this;var expense;return Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return randomWait(2000,4000);case 2:// Insert expense\nexpense={id:uuid_v4__WEBPACK_IMPORTED_MODULE_4___default()(),createdAt:new Date().toISOString(),filename:file.name,status:ExpenseStatus.ANALYZING,vendorName:null,amount:null};this.updateExpensesStorage(function(storage){storage[expense.id]=expense;return storage;});// After a random timeout, we're done analyzing\nsetTimeout(function(){_this.updateExpensesStorage(function(storage){var b=storage[expense.id];if(b){b.status=ExpenseStatus.UNPAID;b.vendorName=faker__WEBPACK_IMPORTED_MODULE_5___default.a.company.companyName();b.amount=faker__WEBPACK_IMPORTED_MODULE_5___default.a.commerce.price();}return storage;});var storage=_this.getExpensesStorage();_this.emit('expenseAnalyzed',storage[expense.id]);},randomLatency(3000,8000));// Return the expense\nreturn _context3.abrupt(\"return\",expense);case 6:case\"end\":return _context3.stop();}}},_callee3,this);}));function uploadExpense(_x2){return _uploadExpense.apply(this,arguments);}return uploadExpense;}()/**\n   * Updates a single expense. Only keys included in `changes` are changed - other\n   * keys are left intact. Resolves with updated `Expense` object. Rejects if expense\n   * does not exist.\n   */},{key:\"patchExpense\",value:function(){var _patchExpense=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(/*#__PURE__*/Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee4(expenseId,changes){return Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return randomWait();case 2:this.updateExpensesStorage(function(storage){if(!storage[expenseId]){throw new Error(\"Expense '\".concat(expenseId,\"' not found\"));}Object.assign(storage[expenseId],changes);return storage;});return _context4.abrupt(\"return\",this.getExpensesStorage()[expenseId]);case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function patchExpense(_x3,_x4){return _patchExpense.apply(this,arguments);}return patchExpense;}()/**\n   * Deletes a expense and resolves when successful. Idempotent.\n   */},{key:\"deleteExpense\",value:function(){var _deleteExpense=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(/*#__PURE__*/Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee5(expenseId){return Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return randomWait();case 2:this.updateExpensesStorage(function(storage){delete storage[expenseId];return storage;});case 3:case\"end\":return _context5.stop();}}},_callee5,this);}));function deleteExpense(_x5){return _deleteExpense.apply(this,arguments);}return deleteExpense;}()/**\n   * Resets the database by deleting all expenses.\n   */},{key:\"reset\",value:function(){var _reset=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(/*#__PURE__*/Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee6(){return Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:this.updateExpensesStorage(function(){return{};});case 1:case\"end\":return _context6.stop();}}},_callee6,this);}));function reset(){return _reset.apply(this,arguments);}return reset;}()/**\n   * Register a listener for events from the \"back-end\". `listener` will be\n   * called when events of the given `eventName` are emitted. The following\n   * events are supported:\n   *\n   * - `expenseAnalyzed`: Called when analisis completes for a expense. Listener will\n   *   be called with the `Expense` object that was updated.\n   */},{key:\"on\",value:function on(eventName,listener){var eventListeners=this.listeners.get(eventName);if(!eventListeners){eventListeners=new Set();this.listeners.set(eventName,eventListeners);}eventListeners.add(listener);}/**\n   * Removes a listener previously registered with `on`.\n   */},{key:\"off\",value:function off(eventName,listener){var eventListeners=this.listeners.get(eventName);if(eventListeners){eventListeners.delete(listener);}}},{key:\"emit\",value:function emit(eventName){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}var eventListeners=this.listeners.get(eventName);if(eventListeners){eventListeners.forEach(function(listener){return listener.apply(void 0,args);});}}},{key:\"getExpensesStorage\",value:function getExpensesStorage(){var raw=localStorage.getItem('roger-tht-expenses');if(!raw){return{};}return JSON.parse(raw);}},{key:\"updateExpensesStorage\",value:function updateExpensesStorage(callback){var storage=callback(this.getExpensesStorage());localStorage.setItem('roger-tht-expenses',JSON.stringify(storage));}}]);return RogerApiClient;}();var client=new RogerApiClient();// Utility types and functions\nfunction randomLatency(){var min=arguments.length>0&&arguments[0]!==undefined?arguments[0]:200;var max=arguments.length>1&&arguments[1]!==undefined?arguments[1]:500;return  false?undefined:Math.round(min+Math.random()*max);}function randomWait(){return _randomWait.apply(this,arguments);}function _randomWait(){_randomWait=Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(/*#__PURE__*/Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee7(){var min,max,_args7=arguments;return Object(_Users_macbook_Desktop_corpayone_michael_two_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:min=_args7.length>0&&_args7[0]!==undefined?_args7[0]:200;max=_args7.length>1&&_args7[1]!==undefined?_args7[1]:500;_context7.next=4;return new Promise(function(resolve){return window.setTimeout(resolve,randomLatency(min,max));});case 4:case\"end\":return _context7.stop();}}},_callee7);}));return _randomWait.apply(this,arguments);}\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/macbook/Desktop/corpayone-michael-two/src/pages/settings/SettingsRoute.tsx","/Users/macbook/Desktop/corpayone-michael-two/src/components/Button.tsx","/Users/macbook/Desktop/corpayone-michael-two/src/util/roger-api-client.ts"],"names":["SettingsRoute","useState","working","setWorking","message","setMessage","reset","client","Button","className","onClick","color","backgroundColor","children","variant","ButtonStyled","styled","button","css","memo","ExpenseStatus","RogerApiClient","listeners","Map","expenseId","randomWait","storage","getExpensesStorage","Error","Object","values","sort","a","b","createdAt","localeCompare","file","expense","id","uuidv4","Date","toISOString","filename","name","status","ANALYZING","vendorName","amount","updateExpensesStorage","setTimeout","UNPAID","faker","company","companyName","commerce","price","emit","randomLatency","changes","assign","eventName","listener","eventListeners","get","Set","set","add","delete","args","forEach","raw","localStorage","getItem","JSON","parse","callback","setItem","stringify","min","max","process","Math","round","random","Promise","resolve","window"],"mappings":"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","file":"x","sourcesContent":["import React, {useState} from 'react'\nimport Button from '../../components/Button'\nimport {client} from '../../util/roger-api-client'\n\nexport const SettingsRoute: React.FC<{}> = () => {\n  const [working, setWorking] = useState(false)\n  const [message, setMessage] = useState('')\n\n  const reset = async () => {\n    setWorking(true)\n    await client.reset()\n    setWorking(false)\n    setMessage('All expenses were deleted.')\n  }\n  return (\n    <>\n      <h1>Data reset</h1>\n      <p>Clicking this button will delete all expenses from localStorage.</p>\n      {message && <div className=\"alert alert-info\">{message}</div>}\n      <p>\n        <Button variant=\"danger\" onClick={reset} disabled={working}>\n          Delete all expenses\n        </Button>\n      </p>\n    </>\n  )\n}\n\nexport default SettingsRoute\n","import React, {memo} from 'react'\nimport styled, {css} from 'styled-components/macro'\n\nexport type ButtonVariants = 'primary' | 'danger'\n\ntype ButtonProps = {\n  className?: string\n  children: React.ReactNode\n  disabled?: boolean\n  onClick: (evt?: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void\n  color?: string\n  backgroundColor?: string\n  variant?: ButtonVariants\n}\n\nconst Button: React.FC<ButtonProps> = ({\n  className,\n  onClick,\n  color,\n  backgroundColor,\n  children,\n  variant = 'primary',\n}) => {\n  return (\n    <ButtonStyled\n      className={className}\n      color={color}\n      backgroundColor={backgroundColor}\n      onClick={onClick}\n      variant={variant}\n    >\n      {children}\n    </ButtonStyled>\n  )\n}\n\nconst ButtonStyled = styled.button<{\n  color?: string\n  backgroundColor?: string\n  variant?: ButtonVariants\n}>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  border: none;\n  cursor: pointer;\n  padding: 5px 10px;\n  user-select: none;\n\n  color: ${({color}) => color || 'white'};\n  background-color: ${({backgroundColor}) => backgroundColor || '#371e88'};\n\n  ${({variant}) =>\n    variant === 'primary' &&\n    css`\n      background-color: #0071b1;\n      &:hover,\n      &:focus {\n        filter: brightness(112%);\n      }\n      &:active {\n        filter: brightness(124%);\n      }\n    `}\n\n  ${({variant}) =>\n    variant === 'danger' &&\n    css`\n      background-color: #d73814;\n      &:hover,\n      &:focus {\n        filter: brightness(112%);\n      }\n      &:active {\n        filter: brightness(124%);\n      }\n    `}\n`\n\nexport default memo(Button)\n","import uuidv4 from 'uuid/v4'\nimport faker from 'faker'\n\n/**\n * Shape of a expense.\n */\nexport interface Expense {\n  /**\n   * Automatically generated by the \"backend\".\n   */\n  id: string\n\n  /**\n   * ISO 8601\n   */\n  createdAt: string\n\n  /**\n   * Name of file that was uploaded for the expense.\n   */\n  filename: string\n\n  /**\n   * The expense's current status. See `ExpenseStatus` for a description of a expense's\n   * life cycle.\n   */\n  status: ExpenseStatus\n\n  /**\n   * When uploaded, this field will be `null`. When expense analysis completes, it\n   * will be populated with the vendor's name.\n   */\n  vendorName: string | null\n\n  /**\n   * When uploaded, this field will be `null`. When expense analysis completes, it\n   * will be populated with the amount due.\n   */\n  amount: string | null\n}\n\n/**\n * Newly uploaded expenses start out as being analyzed. After a period of time,\n * they become unpaid. When a user marks them as such, they become paid.\n */\nexport enum ExpenseStatus {\n  ANALYZING = 'ANALYZING',\n  UNPAID = 'UNPAID',\n  PAID = 'PAID'\n}\n\n/**\n * Fake implementation of a primitive API that handles expenses.\n */\nclass RogerApiClient {\n  private listeners = new Map<string, Set<Listener>>()\n\n  /**\n   * Finds a single expense by its ID and resolves with it. Will reject if the expense\n   * does not exist.\n   */\n  async getExpense(expenseId: string): Promise<Expense> {\n    await randomWait()\n    const storage = this.getExpensesStorage()\n    if (!storage[expenseId]) {\n      throw new Error(`Expense '${expenseId}' not found`)\n    }\n    return storage[expenseId]\n  }\n\n  /**\n   * Resolves with a list of all expenses sorted by `createdAt` in descending\n   * order.\n   */\n  async listExpenses(): Promise<Expense[]> {\n    await randomWait()\n    const storage = this.getExpensesStorage()\n    return Object.values(storage).sort((a, b) =>\n      b.createdAt.localeCompare(b.createdAt)\n    )\n  }\n\n  /**\n   * Takes a `File` object, which the user has selected for upload. Uploads the\n   * file (which takes a few seconds), and then resolves with a new `Expense`\n   * object with status=ANALYZING.\n   *\n   * After a random period of time, the expense will be analyzed and be marked as\n   * paid. Listen for `expenseAnalyzed` events through the `on` method.\n   */\n  async uploadExpense(file: File): Promise<Expense> {\n    await randomWait(2000, 4000)\n\n    // Insert expense\n    const expense: Expense = {\n      id: uuidv4(),\n      createdAt: new Date().toISOString(),\n      filename: file.name,\n      status: ExpenseStatus.ANALYZING,\n      vendorName: null,\n      amount: null\n    }\n    this.updateExpensesStorage(storage => {\n      storage[expense.id] = expense\n      return storage\n    })\n\n    // After a random timeout, we're done analyzing\n    setTimeout(() => {\n      this.updateExpensesStorage(storage => {\n        const b = storage[expense.id]\n        if (b) {\n          b.status = ExpenseStatus.UNPAID\n          b.vendorName = faker.company.companyName()\n          b.amount = faker.commerce.price()\n        }\n        return storage\n      })\n      const storage = this.getExpensesStorage()\n      this.emit('expenseAnalyzed', storage[expense.id])\n    }, randomLatency(3000, 8000))\n\n    // Return the expense\n    return expense\n  }\n\n  /**\n   * Updates a single expense. Only keys included in `changes` are changed - other\n   * keys are left intact. Resolves with updated `Expense` object. Rejects if expense\n   * does not exist.\n   */\n  async patchExpense(\n    expenseId: string,\n    changes: Partial<Expense>\n  ): Promise<Expense> {\n    await randomWait()\n    this.updateExpensesStorage(storage => {\n      if (!storage[expenseId]) {\n        throw new Error(`Expense '${expenseId}' not found`)\n      }\n      Object.assign(storage[expenseId], changes)\n      return storage\n    })\n    return this.getExpensesStorage()[expenseId]\n  }\n\n  /**\n   * Deletes a expense and resolves when successful. Idempotent.\n   */\n  async deleteExpense(expenseId: string): Promise<void> {\n    await randomWait()\n    this.updateExpensesStorage(storage => {\n      delete storage[expenseId]\n      return storage\n    })\n  }\n\n  /**\n   * Resets the database by deleting all expenses.\n   */\n  async reset(): Promise<void> {\n    this.updateExpensesStorage(() => ({}))\n  }\n\n  /**\n   * Register a listener for events from the \"back-end\". `listener` will be\n   * called when events of the given `eventName` are emitted. The following\n   * events are supported:\n   *\n   * - `expenseAnalyzed`: Called when analisis completes for a expense. Listener will\n   *   be called with the `Expense` object that was updated.\n   */\n  on(eventName: 'expenseAnalyzed', listener: (expense: Expense) => void): void\n  on(eventName: string, listener: Listener): void {\n    let eventListeners = this.listeners.get(eventName)\n    if (!eventListeners) {\n      eventListeners = new Set()\n      this.listeners.set(eventName, eventListeners)\n    }\n    eventListeners.add(listener)\n  }\n\n  /**\n   * Removes a listener previously registered with `on`.\n   */\n  off(eventName: string, listener: Listener) {\n    let eventListeners = this.listeners.get(eventName)\n    if (eventListeners) {\n      eventListeners.delete(listener)\n    }\n  }\n\n  private emit(eventName: 'expenseAnalyzed', expense: Expense): void\n  private emit(eventName: string, ...args: any[]): void {\n    let eventListeners = this.listeners.get(eventName)\n    if (eventListeners) {\n      eventListeners.forEach(listener => listener(...args))\n    }\n  }\n\n  private getExpensesStorage(): ExpensesStorage {\n    const raw = localStorage.getItem('roger-tht-expenses')\n    if (!raw) {\n      return {}\n    }\n    return JSON.parse(raw)\n  }\n\n  private updateExpensesStorage(\n    callback: (storage: ExpensesStorage) => ExpensesStorage\n  ) {\n    const storage = callback(this.getExpensesStorage())\n    localStorage.setItem('roger-tht-expenses', JSON.stringify(storage))\n  }\n}\n\nexport const client = new RogerApiClient()\n\n// Utility types and functions\ntype Listener = (...args: any[]) => void\n\ntype ExpensesStorage = {[id: string]: Expense}\n\nfunction randomLatency(min: number = 200, max: number = 500) {\n  return process.env.NODE_ENV === 'test'\n    ? 1\n    : Math.round(min + Math.random() * max)\n}\n\nasync function randomWait(min: number = 200, max: number = 500) {\n  await new Promise(resolve =>\n    window.setTimeout(resolve, randomLatency(min, max))\n  )\n}\n"]}}